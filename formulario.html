<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Reservas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            color: #333;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        input[type="number"] {
            width: 60px;
            display: inline-block;
        }

        button {
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .product {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .product input[type="checkbox"] {
            margin-right: 10px;
        }

        .product span {
            margin-right: 10px;
        }

        .subtotal {
            margin-left: auto;
        }

        @media (max-width: 600px) {
            .container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Formulario de Reserva</h1>

        <!-- Formulario de reserva -->
        <form id="reservationForm">
            <label for="date">Fecha:</label>
            <input type="date" id="date" required>

            <label for="time">Hora:</label>
            <input type="time" id="time" required>

            <label for="people">Cantidad de Personas:</label>
            <input type="number" id="people" min="1">

            <label for="firstName">Nombre:</label>
            <input type="text" id="firstName" required>

            <label for="lastName">Apellidos:</label>
            <input type="text" id="lastName" required>

            <label for="phone">Celular:</label>
            <input type="tel" id="phone" pattern="^[0-9]{9}$" required>

            <label for="email">E-mail:</label>
            <input type="email" id="email" required>

            <label for="comments">Comentarios:</label>
            <textarea id="comments"></textarea>

            <h2>Carrito de Compras</h2>
            <div id="productList">
                <!-- Productos con checkbox y cantidad -->
                <div class="product">
                    <input type="checkbox" id="product1" data-price="15000">
                    <label for="product1">Producto 1</label>
                    <span>Descripción 1</span>
                    <span>$15,000 CLP</span>
                    <input type="number" id="quantity1" value="0" min="0" readonly>
                    <button type="button" onclick="adjustQuantity(1, '+')">+</button>
                    <button type="button" onclick="adjustQuantity(1, '-')">-</button>
                    <span class="subtotal" id="subtotal1">$0</span>
                </div>
                <div class="product">
                    <input type="checkbox" id="product2" data-price="20000">
                    <label for="product2">Producto 2</label>
                    <span>Descripción 2</span>
                    <span>$20,000 CLP</span>
                    <input type="number" id="quantity2" value="0" min="0" readonly>
                    <button type="button" onclick="adjustQuantity(2, '+')">+</button>
                    <button type="button" onclick="adjustQuantity(2, '-')">-</button>
                    <span class="subtotal" id="subtotal2">$0</span>
                </div>
                <div class="product">
                    <input type="checkbox" id="product3" data-price="25000">
                    <label for="product3">Producto 3</label>
                    <span>Descripción 3</span>
                    <span>$25,000 CLP</span>
                    <input type="number" id="quantity3" value="0" min="0" readonly>
                    <button type="button" onclick="adjustQuantity(3, '+')">+</button>
                    <button type="button" onclick="adjustQuantity(3, '-')">-</button>
                    <span class="subtotal" id="subtotal3">$0</span>
                </div>
                <div class="product">
                    <input type="checkbox" id="product4" data-price="30000">
                    <label for="product4">Producto 4</label>
                    <span>Descripción 4</span>
                    <span>$30,000 CLP</span>
                    <input type="number" id="quantity4" value="0" min="0" readonly>
                    <button type="button" onclick="adjustQuantity(4, '+')">+</button>
                    <button type="button" onclick="adjustQuantity(4, '-')">-</button>
                    <span class="subtotal" id="subtotal4">$0</span>
                </div>
                <div class="product">
                    <input type="checkbox" id="product5" data-price="35000">
                    <label for="product5">Producto 5</label>
                    <span>Descripción 5</span>
                    <span>$35,000 CLP</span>
                    <input type="number" id="quantity5" value="0" min="0" readonly>
                    <button type="button" onclick="adjustQuantity(5, '+')">+</button>
                    <button type="button" onclick="adjustQuantity(5, '-')">-</button>
                    <span class="subtotal" id="subtotal5">$0</span>
                </div>
            </div>

            <h3>Total General: <span id="total">$0</span></h3>
            <button type="submit">Reservar y Enviar a WhatsApp</button>
        </form>
    </div>

    <script>
        // Función para ajustar la cantidad de productos
        function adjustQuantity(productId, action) {
            const quantityInput = document.getElementById('quantity' + productId);
            let currentQuantity = parseInt(quantityInput.value);
            
            if (action === '+') {
                currentQuantity++;
            } else if (action === '-' && currentQuantity > 0) {
                currentQuantity--;
            }

            quantityInput.value = currentQuantity;

            updateSubtotal(productId, currentQuantity);
        }

        // Función para calcular el subtotal de cada producto
        function updateSubtotal(productId, quantity) {
            const product = document.getElementById('product' + productId);
            const price = parseInt(product.getAttribute('data-price'));
            const subtotal = document.getElementById('subtotal' + productId);

            let newSubtotal = price * quantity;
            subtotal.textContent = `$${newSubtotal.toLocaleString()}`;

            updateTotal();
        }

        // Función para actualizar el total general
        function updateTotal() {
            let total = 0;

            for (let i = 1; i <= 5; i++) {
                const product = document.getElementById('product' + i);
                if (product.checked) {
                    const quantity = parseInt(document.getElementById('quantity' + i).value);
                    const price = parseInt(product.getAttribute('data-price'));
                    total += price * quantity;
                }
            }

            document.getElementById('total').textContent = `$${total.toLocaleString()}`;
        }

        // Enviar datos a WhatsApp
        document.getElementById('reservationForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;
            const people = document.getElementById('people').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const comments = document.getElementById('comments').value;

            let products = '';
            for (let i = 1; i <= 5; i++) {
                const product = document.getElementById('product' + i);
                const quantity = parseInt(document.getElementById('quantity' + i).value);

                if (product.checked && quantity > 0) {
                    const productName = product.nextElementSibling.textContent.trim();
                    const productPrice = product.getAttribute('data-price');
                    products += `${productName} - Cantidad: ${quantity} - Precio: $${(productPrice * quantity).toLocaleString()} CLP\n`;
                }
            }

            const message = `Reserva:\nFecha: ${date}\nHora: ${time}\nPersonas: ${people}\nNombre: ${firstName} ${lastName}\nTeléfono: ${phone}\nEmail: ${email}\nComentarios: ${comments}\n\nProductos seleccionados:\n${products}\nTotal: $${document.getElementById('total').textContent}`;

            const whatsappLink = `https://wa.me/56932334235?text=${encodeURIComponent(message)}`;
            window.open(whatsappLink, '_blank');
        });
    </script>
</body>
</html>
