<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reserva de Evento</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }

    .container {
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
    }

    input[type="text"], input[type="email"], input[type="date"], input[type="time"], input[type="number"], textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .checkbox-group {
      margin-bottom: 20px;
    }

    .product {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .product label {
      flex-grow: 1;
    }

    .quantity {
      display: flex;
      align-items: center;
      margin-left: 10px;
    }

    .quantity input {
      width: 40px;
      text-align: center;
    }

    .subtotal {
      margin-left: 10px;
    }

    .total {
      font-weight: bold;
      text-align: right;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }

    button:disabled {
      background-color: #ccc;
    }

    /* Responsive design */
    @media screen and (max-width: 600px) {
      .container {
        padding: 15px;
      }

      h1 {
        font-size: 18px;
      }

      input[type="text"], input[type="email"], input[type="date"], input[type="time"], input[type="number"], textarea {
        font-size: 14px;
      }

      .quantity input {
        width: 30px;
      }

      .subtotal {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Reserva de Evento</h1>

    <!-- Formulario de reserva -->
    <form id="reservation-form" onsubmit="return false;">
      
      <!-- Información de contacto -->
      <div class="form-group">
        <label for="date">Fecha <span>*</span></label>
        <input type="date" id="date" required>
      </div>

      <div class="form-group">
        <label for="time">Hora <span>*</span></label>
        <input type="time" id="time" required>
      </div>

      <div class="form-group">
        <label for="name">Nombre <span>*</span></label>
        <input type="text" id="name" required>
      </div>

      <div class="form-group">
        <label for="lastname">Apellidos <span>*</span></label>
        <input type="text" id="lastname" required>
      </div>

      <div class="form-group">
        <label for="phone">Celular <span>*</span></label>
        <input type="text" id="phone" pattern="^\d{9}$" required>
      </div>

      <div class="form-group">
        <label for="email">E-mail <span>*</span></label>
        <input type="email" id="email" required>
      </div>

      <div class="form-group">
        <label for="comments">Comentarios</label>
        <textarea id="comments" rows="4"></textarea>
      </div>

      <!-- Carrito de compras -->
      <div class="checkbox-group">
        <h2>Productos</h2>
        <div class="product">
          <input type="checkbox" id="product1" class="product-checkbox">
          <label for="product1">Producto 1 - $10,000 CLP</label>
          <div class="quantity">
            <button type="button" onclick="updateQuantity('product1', -1)">-</button>
            <input type="number" id="quantity1" value="0" min="0" onchange="updateSubtotal('product1')">
            <button type="button" onclick="updateQuantity('product1', 1)">+</button>
          </div>
          <span class="subtotal" id="subtotal1">Subtotal: $0</span>
        </div>

        <div class="product">
          <input type="checkbox" id="product2" class="product-checkbox">
          <label for="product2">Producto 2 - $15,000 CLP</label>
          <div class="quantity">
            <button type="button" onclick="updateQuantity('product2', -1)">-</button>
            <input type="number" id="quantity2" value="0" min="0" onchange="updateSubtotal('product2')">
            <button type="button" onclick="updateQuantity('product2', 1)">+</button>
          </div>
          <span class="subtotal" id="subtotal2">Subtotal: $0</span>
        </div>

        <div class="product">
          <input type="checkbox" id="product3" class="product-checkbox">
          <label for="product3">Producto 3 - $20,000 CLP</label>
          <div class="quantity">
            <button type="button" onclick="updateQuantity('product3', -1)">-</button>
            <input type="number" id="quantity3" value="0" min="0" onchange="updateSubtotal('product3')">
            <button type="button" onclick="updateQuantity('product3', 1)">+</button>
          </div>
          <span class="subtotal" id="subtotal3">Subtotal: $0</span>
        </div>

        <div class="product">
          <input type="checkbox" id="product4" class="product-checkbox">
          <label for="product4">Producto 4 - $25,000 CLP</label>
          <div class="quantity">
            <button type="button" onclick="updateQuantity('product4', -1)">-</button>
            <input type="number" id="quantity4" value="0" min="0" onchange="updateSubtotal('product4')">
            <button type="button" onclick="updateQuantity('product4', 1)">+</button>
          </div>
          <span class="subtotal" id="subtotal4">Subtotal: $0</span>
        </div>

        <div class="product">
          <input type="checkbox" id="product5" class="product-checkbox">
          <label for="product5">Producto 5 - $30,000 CLP</label>
          <div class="quantity">
            <button type="button" onclick="updateQuantity('product5', -1)">-</button>
            <input type="number" id="quantity5" value="0" min="0" onchange="updateSubtotal('product5')">
            <button type="button" onclick="updateQuantity('product5', 1)">+</button>
          </div>
          <span class="subtotal" id="subtotal5">Subtotal: $0</span>
        </div>

        <div class="total">
          <p>Total General: <span id="total">0</span> CLP</p>
        </div>
      </div>

      <!-- Botón para enviar por WhatsApp -->
      <button id="whatsapp-btn" disabled onclick="sendWhatsApp()">Enviar Reserva</button>
    </form>
  </div>

  <script>
    // Función para actualizar la cantidad y la selección de checkbox
    function updateQuantity(productId, change) {
      var quantityInput = document.getElementById('quantity' + productId.charAt(productId.length - 1));
      var quantity = parseInt(quantityInput.value) + change;
      if (quantity < 0) quantity = 0;
      quantityInput.value = quantity;
      updateSubtotal(productId);
    }

    // Función para actualizar el subtotal de un producto
    function updateSubtotal(productId) {
      var quantity = document.getElementById('quantity' + productId.charAt(productId.length - 1)).value;
      var price = parseInt(productId.charAt(productId.length - 1)) * 5000 + 10000; // Precios ejemplo
      var subtotal = quantity * price;
      document.getElementById('subtotal' + productId.charAt(productId.length - 1)).innerText = "Subtotal: $" + subtotal;
      document.getElementById(productId).checked = quantity > 0;
      updateTotal();
    }

    // Función para actualizar el total general
    function updateTotal() {
      var total = 0;
      for (var i = 1; i <= 5; i++) {
        var quantity = document.getElementById('quantity' + i).value;
        var price = i * 5000 + 10000;
        total += quantity * price;
      }
      document.getElementById('total').innerText = total;
      validateForm();
    }

    // Función para validar el formulario y habilitar/deshabilitar el botón de WhatsApp
    function validateForm() {
      var name = document.getElementById('name').value;
      var lastname = document.getElementById('lastname').value;
      var phone = document.getElementById('phone').value;
      var email = document.getElementById('email').value;
      var date = document.getElementById('date').value;
      var time = document.getElementById('time').value;

      // Verifica si los campos obligatorios están completos
      if (name && lastname && phone && email && date && time) {
        document.getElementById('whatsapp-btn').disabled = false;
      } else {
        document.getElementById('whatsapp-btn').disabled = true;
      }
    }

    // Función para enviar la reserva por WhatsApp
    function sendWhatsApp() {
      var name = document.getElementById('name').value;
      var lastname = document.getElementById('lastname').value;
      var phone = document.getElementById('phone').value;
      var email = document.getElementById('email').value;
      var date = document.getElementById('date').value;
      var time = document.getElementById('time').value;
      var comments = document.getElementById('comments').value;
      var total = document.getElementById('total').innerText;

      var message = `*Reserva de Evento*\n\n`;
      message += `Nombre: ${name} ${lastname}\n`;
      message += `Celular: ${phone}\n`;
      message += `E-mail: ${email}\n`;
      message += `Fecha: ${date}\n`;
      message += `Hora: ${time}\n`;
      message += `Comentarios: ${comments}\n`;
      message += `Total General: $${total}\n`;

      var url = `https://wa.me/56932334235?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }
  </script>

</body>
</html>